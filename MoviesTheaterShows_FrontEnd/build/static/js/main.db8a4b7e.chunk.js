(this["webpackJsonpstarter-movie-front-end"]=this["webpackJsonpstarter-movie-front-end"]||[]).push([[0],{37:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(1),s=r.n(c),a=r(18),i=r.n(a),o=r(5);var l=function(){return Object(n.jsxs)("ul",{className:"nav justify-content-start",style:{padding:"1rem 0 3rem"},children:[Object(n.jsx)("li",{className:"nav-item d-none d-lg-block d-xl-block",children:Object(n.jsx)(o.b,{className:"font-poppins-heading nav-link mx-2 text-light",to:"/",children:Object(n.jsx)("h1",{className:"h5",style:{fontStyle:"italic"},children:"WeLoveMovies"})})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/movies",children:"All Movies"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(o.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/theaters",children:"All Theaters"})})]})},u=r.p+"static/media/header.c47d8fe5.jpg";var j=function(){var e={background:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7)), url(".concat(u,")"),backgroundPosition:"center",backgroundSize:"100% auto"};return Object(n.jsxs)("div",{className:"jumbotron jumbotron-fluid text-white border-bottom border-dark pt-0",style:e,children:[Object(n.jsx)(l,{}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{className:"display-4",children:"Find your next favorite movie!"}),Object(n.jsxs)("p",{className:"lead",children:[Object(n.jsx)("em",{children:"WeLoveMovies"})," is your source for finding reviews of movies in theatres near you."]})]})]})},d=r(8);var b=function(e){var t=e.error;return t&&Object(n.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})},h=r(4),m=r.n(h),v=r(10),x=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_BASE_URL||"https://nir-welovemovies-backend.herokuapp.com",O=new Headers;function p(e,t,r){return f.apply(this,arguments)}function f(){return(f=Object(v.a)(m.a.mark((function e(t,r,n){var c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,r);case 3:if(204!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,c.json();case 8:if(!(s=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:s.error}));case 11:return e.abrupt("return",s.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(n));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function w(e){return function(){var t=Object(v.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"/movies/").concat(r.movie_id,"/reviews"),t.next=3,p(n,{headers:O,signal:e},[]);case 3:return r.reviews=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function g(e){return function(){var t=Object(v.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(x,"/movies/").concat(r.movie_id,"/theaters"),t.next=3,p(n,{headers:O,signal:e},[]);case 3:return r.theaters=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function N(e){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(m.a.mark((function e(t){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(x,"/movies?is_showing=true")),n=w(t),e.next=4,p(r,{headers:O,signal:t},[]).then((function(e){return Promise.all(e.map(n))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(v.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(x,"/theaters")),e.next=3,p(r,{headers:O,signal:t},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function e(t,r){var n,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(x,"/movies/").concat(t)),c=w(r),s=g(r),e.next=5,p(n,{headers:O,signal:r},[]).then(c).then(s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(v.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(x,"/reviews/").concat(t),e.next=3,p(r,{method:"DELETE",headers:O},{});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(v.a)(m.a.mark((function e(t,r){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(x,"/reviews/").concat(t),c={method:"PUT",headers:O,body:JSON.stringify({data:r})},e.next=4,p(n,c,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O.append("Content-Type","application/json");var E=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),r=t[0],s=t[1],a=Object(c.useState)(null),i=Object(d.a)(a,2),l=i[0],u=i[1];Object(c.useEffect)((function(){u(null);var e=new AbortController;return N(e.signal).then(s).catch(u),function(){return e.abort()}}),[]);var j=r.map((function(e){return Object(n.jsxs)("article",{className:"col-sm-12 col-md-6 col-lg-3 my-2",children:[Object(n.jsx)("img",{alt:"".concat(e.title," Poster"),className:"rounded",src:e.image_url,style:{width:"100%"}}),Object(n.jsx)(o.b,{to:"/movies/".concat(e.movie_id),className:"stretched-link text-dark",children:Object(n.jsx)("h3",{className:"font-poppins-heading text-center mt-2",children:e.title})})]},e.movie_id)}));return Object(n.jsxs)("main",{className:"container",children:[Object(n.jsx)(b,{error:l}),Object(n.jsx)("h2",{className:"font-poppins",children:"Now Showing"}),Object(n.jsx)("hr",{}),Object(n.jsx)("section",{className:"row",children:j})]})};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=e.reduce((function(e,t){return e+t.score}),0);return Math.round(t/e.length)}return"N/A"}var P=function(e){var t=e.reviews,r=void 0===t?[]:t;return Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Average Review Rating:"})," ",A(r)]})};var T=function(e){var t=e.movie;return Object(n.jsxs)("section",{className:"row mt-4",children:[Object(n.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(n.jsx)("img",{alt:"".concat(t.title," Poster"),className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(n.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(n.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(n.jsx)("p",{children:t.description}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Runtime:"})," ",t.runtime," minutes"]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(n.jsx)(P,{reviews:t.reviews}),Object(n.jsx)(o.b,{to:"/movies/".concat(t.movie_id),className:"btn btn-primary",children:"See More"})]})]})};var C=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),r=t[0],s=t[1],a=Object(c.useState)(null),i=Object(d.a)(a,2),o=i[0],l=i[1];Object(c.useEffect)((function(){l(null);var e=new AbortController;return N(e.signal).then(s).catch(l),function(){return e.abort()}}),[]);var u=r.map((function(e){return Object(n.jsx)(T,{movie:e},e.movie_id)}));return Object(n.jsxs)("main",{className:"container",children:[Object(n.jsx)(b,{error:o}),Object(n.jsx)("h2",{className:"font-poppins",children:"All Movies"}),Object(n.jsx)("hr",{}),Object(n.jsx)("section",{children:u})]})},L=r(2);var M=function(e){var t=e.movie;return Object(n.jsxs)("section",{children:[Object(n.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(n.jsx)("p",{children:t.description}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Runtime:"})," ",t.runtime_in_minutes," minutes"]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(n.jsx)(P,{reviews:t.reviews})]})},H=r(20),U={padding:"0 0px 5px 5px"};var D=function(e){var t=e.review,r=e.deleteReview,c=e.setReviewScore,s=t.critic;return Object(n.jsxs)("section",{className:"border p-4 mb-4",children:[Object(n.jsxs)("h4",{children:[s.preferred_name," ",s.surname,Object(n.jsxs)("small",{children:[" of ",s.organization_name]})]}),Object(n.jsx)("p",{dangerouslySetInnerHTML:{__html:H.markdown.toHTML(t.content)}}),Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{children:"Rating:"})," ",t.score,Object(n.jsx)("button",{className:"btn btn-link",style:U,onClick:function(){return function(){var e=t.score+1;e>5||c(t,e)}()},children:"\u2191"}),Object(n.jsx)("button",{className:"btn btn-link",style:U,onClick:function(){return function(){var e=t.score-1;e<1||c(t,e)}()},children:"\u2193"})]}),Object(n.jsx)("button",{className:"btn btn-danger",onClick:function(){return r(t)},children:"Destroy Review"})]})};var I=function(e){var t=e.reviews,r=void 0===t?[]:t,c=e.deleteReview,s=e.setReviewScore;if(r.length){var a=r.sort((function(e,t){return e.critic.preferred_name.localeCompare(t.critic.preferred_name)})).map((function(e){return Object(n.jsx)(D,{review:e,deleteReview:c,setReviewScore:s},e.review_id)}));return Object(n.jsxs)("section",{className:"mt-4",children:[Object(n.jsx)("h3",{children:"Reviews"}),a]})}return null};var W=function(e){var t=e.theater;return Object(n.jsx)("article",{className:"col-sm-12 col-md",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{children:t.name}),Object(n.jsxs)("address",{children:[t.address_line_1,Object(n.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]})})})};var z=function(e){var t=e.theaters,r=void 0===t?[]:t;return r.length?Object(n.jsxs)("section",{className:"mt-4",children:[Object(n.jsx)("h4",{children:"Now Showing Here"}),Object(n.jsx)("div",{className:"row",children:r.map((function(e){return Object(n.jsx)(W,{theater:e},e.theater_id)}))})]}):null};var B=function(){var e=Object(L.f)().movieId,t=Object(c.useState)({}),r=Object(d.a)(t,2),s=r[0],a=r[1],i=Object(c.useState)(null),o=Object(d.a)(i,2),l=o[0],u=o[1];function j(e){u(null);var t=new AbortController;return function(e,t){return k.apply(this,arguments)}(e,t.signal).then(a).catch(u),function(){return t.abort()}}return Object(c.useEffect)((function(){j(e)}),[e]),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(b,{error:l}),Object(n.jsxs)("section",{className:"row mt-4",children:[Object(n.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(n.jsx)("img",{alt:"".concat(s.title," Poster"),className:"rounded",src:s.image_url,style:{width:"100%"}})}),Object(n.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(n.jsx)(M,{movie:s}),Object(n.jsx)(z,{theaters:s.theaters}),Object(n.jsx)(I,{reviews:s.reviews,deleteReview:function(e){var t=e.movie_id;(function(e){return S.apply(this,arguments)})(e.review_id).then((function(){return j(t)}))},setReviewScore:function(e,t){var r=e.movie_id,n=e.review_id;console.log("score",n,t),function(e,t){return R.apply(this,arguments)}(n,{score:t}).then((function(){return j(r)}))}})]})]})]})};var F=function(e){var t=e.theater;return Object(n.jsx)("article",{className:"col-12 mb-4",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("aside",{className:"col",children:[Object(n.jsx)("h2",{children:t.name}),Object(n.jsxs)("address",{children:[t.address_line_1,Object(n.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]}),Object(n.jsx)("section",{className:"col",children:Object(n.jsx)("div",{className:"row",children:t.movies.map((function(e){return Object(n.jsx)("div",{className:"col-2",children:Object(n.jsx)(o.b,{to:"/movies/".concat(e.movie_id),children:Object(n.jsx)("img",{alt:"".concat(e.title," Poster"),src:e.image_url,className:"w-100"})})},e.movie_id)}))})})]})})};var J=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),r=t[0],s=t[1],a=Object(c.useState)(null),i=Object(d.a)(a,2),o=i[0],l=i[1];Object(c.useEffect)((function(){l(null);var e=new AbortController;return function(e){return y.apply(this,arguments)}(e.signal).then(s).catch(l),function(){return e.abort()}}),[]);var u=r.map((function(e){return Object(n.jsx)(F,{theater:e},e.theater_id)}));return Object(n.jsxs)("main",{className:"container",children:[Object(n.jsx)(b,{error:o}),Object(n.jsx)("h2",{className:"font-poppins",children:"All Theaters"}),Object(n.jsx)("hr",{}),Object(n.jsx)("section",{className:"row",children:u})]})};var K=function(){return Object(n.jsxs)(o.a,{children:[Object(n.jsx)(j,{}),Object(n.jsxs)(L.c,{children:[Object(n.jsx)(L.a,{exact:!0,path:"/",children:Object(n.jsx)(E,{})}),Object(n.jsx)(L.a,{exact:!0,path:"/movies",children:Object(n.jsx)(C,{})}),Object(n.jsx)(L.a,{exact:!0,path:"/movies/:movieId",children:Object(n.jsx)(B,{})}),Object(n.jsx)(L.a,{exact:!0,path:"/theaters",children:Object(n.jsx)(J,{})})]})]})};r(37);i.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.db8a4b7e.chunk.js.map