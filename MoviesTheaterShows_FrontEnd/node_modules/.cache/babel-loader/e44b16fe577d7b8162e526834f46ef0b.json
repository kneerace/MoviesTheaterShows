{"ast":null,"code":"import _slicedToArray from\"/Users/jeenir/Desktop/Learn/WebDevelopment/ThinkFul/Assignment-WeLoveMovies/MoviesTheaterShows/MoviesTheaterShows_FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import Details from\"./Details\";import ReviewList from\"./ReviewList\";import TheaterList from\"./TheaterList\";import{deleteReview,readMovie,updateReview}from\"../utils/api\";import ErrorAlert from\"../shared/ErrorAlert\";function FullMovie(){var _useParams=useParams(),movieId=_useParams.movieId;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){loadMovie(movieId);},[movieId]);function loadMovie(movieId){setError(null);var abortController=new AbortController();readMovie(movieId,abortController.signal).then(setMovie).catch(setError);return function(){return abortController.abort();};}function deleteReviewHandler(_ref){var movieId=_ref.movie_id,reviewId=_ref.review_id;deleteReview(reviewId).then(function(){return loadMovie(movieId);});}function updateScoreHandler(_ref2,score){var movieId=_ref2.movie_id,reviewId=_ref2.review_id;console.log(\"score\",reviewId,score);updateReview(reviewId,{score:score}).then(function(){return loadMovie(movieId);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(ErrorAlert,{error:error}),/*#__PURE__*/_jsxs(\"section\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsx(\"article\",{className:\"col-sm-12 col-md-6 col-lg-3\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"\".concat(movie.title,\" Poster\"),className:\"rounded\",src:movie.image_url,style:{width:\"100%\"}})}),/*#__PURE__*/_jsxs(\"aside\",{className:\"col-sm-12 col-md-6 col-lg-9\",children:[/*#__PURE__*/_jsx(Details,{movie:movie}),/*#__PURE__*/_jsx(TheaterList,{theaters:movie.theaters}),/*#__PURE__*/_jsx(ReviewList,{reviews:movie.reviews,deleteReview:deleteReviewHandler,setReviewScore:updateScoreHandler})]})]})]});}export default FullMovie;","map":{"version":3,"sources":["/Users/jeenir/Desktop/Learn/WebDevelopment/ThinkFul/Assignment-WeLoveMovies/MoviesTheaterShows/MoviesTheaterShows_FrontEnd/src/movie/FullMovie.js"],"names":["React","useState","useEffect","useParams","Details","ReviewList","TheaterList","deleteReview","readMovie","updateReview","ErrorAlert","FullMovie","movieId","movie","setMovie","error","setError","loadMovie","abortController","AbortController","signal","then","catch","abort","deleteReviewHandler","movie_id","reviewId","review_id","updateScoreHandler","score","console","log","title","image_url","width","theaters","reviews"],"mappings":"yUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,OAASC,YAAT,CAAuBC,SAAvB,CAAkCC,YAAlC,KAAsD,cAAtD,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CAEA,QAASC,CAAAA,SAAT,EAAqB,gBACCR,SAAS,EADV,CACXS,OADW,YACXA,OADW,eAEOX,QAAQ,CAAC,EAAD,CAFf,wCAEZY,KAFY,eAELC,QAFK,8BAGOb,QAAQ,CAAC,IAAD,CAHf,yCAGZc,KAHY,eAGLC,QAHK,eAKnBd,SAAS,CAAC,UAAM,CACde,SAAS,CAACL,OAAD,CAAT,CACD,CAFQ,CAEN,CAACA,OAAD,CAFM,CAAT,CAIA,QAASK,CAAAA,SAAT,CAAmBL,OAAnB,CAA4B,CAC1BI,QAAQ,CAAC,IAAD,CAAR,CACA,GAAME,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CACAX,SAAS,CAACI,OAAD,CAAUM,eAAe,CAACE,MAA1B,CAAT,CAA2CC,IAA3C,CAAgDP,QAAhD,EAA0DQ,KAA1D,CAAgEN,QAAhE,EACA,MAAO,kBAAME,CAAAA,eAAe,CAACK,KAAhB,EAAN,EAAP,CACD,CAED,QAASC,CAAAA,mBAAT,MAAyE,IAAhCZ,CAAAA,OAAgC,MAA1Ca,QAA0C,CAAZC,QAAY,MAAvBC,SAAuB,CACvEpB,YAAY,CAACmB,QAAD,CAAZ,CAAuBL,IAAvB,CAA4B,iBAAMJ,CAAAA,SAAS,CAACL,OAAD,CAAf,EAA5B,EACD,CAED,QAASgB,CAAAA,kBAAT,OAEEC,KAFF,CAGE,IAFYjB,CAAAA,OAEZ,OAFEa,QAEF,CAFgCC,QAEhC,OAFqBC,SAErB,CACAG,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBL,QAArB,CAA+BG,KAA/B,EACApB,YAAY,CAACiB,QAAD,CAAW,CAAEG,KAAK,CAALA,KAAF,CAAX,CAAZ,CAAkCR,IAAlC,CAAuC,iBAAMJ,CAAAA,SAAS,CAACL,OAAD,CAAf,EAAvC,EACD,CAED,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,KAAC,UAAD,EAAY,KAAK,CAAEG,KAAnB,EADF,cAEE,iBAAS,SAAS,CAAC,UAAnB,wBACE,gBAAS,SAAS,CAAC,6BAAnB,uBACE,YACE,GAAG,WAAKF,KAAK,CAACmB,KAAX,WADL,CAEE,SAAS,CAAC,SAFZ,CAGE,GAAG,CAAEnB,KAAK,CAACoB,SAHb,CAIE,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAT,CAJT,EADF,EADF,cASE,eAAO,SAAS,CAAC,6BAAjB,wBACE,KAAC,OAAD,EAAS,KAAK,CAAErB,KAAhB,EADF,cAEE,KAAC,WAAD,EAAa,QAAQ,CAAEA,KAAK,CAACsB,QAA7B,EAFF,cAGE,KAAC,UAAD,EACE,OAAO,CAAEtB,KAAK,CAACuB,OADjB,CAEE,YAAY,CAAEZ,mBAFhB,CAGE,cAAc,CAAEI,kBAHlB,EAHF,GATF,GAFF,GADF,CAwBD,CAED,cAAejB,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Details from \"./Details\";\nimport ReviewList from \"./ReviewList\";\nimport TheaterList from \"./TheaterList\";\nimport { deleteReview, readMovie, updateReview } from \"../utils/api\";\nimport ErrorAlert from \"../shared/ErrorAlert\";\n\nfunction FullMovie() {\n  const { movieId } = useParams();\n  const [movie, setMovie] = useState({});\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    loadMovie(movieId);\n  }, [movieId]);\n\n  function loadMovie(movieId) {\n    setError(null);\n    const abortController = new AbortController();\n    readMovie(movieId, abortController.signal).then(setMovie).catch(setError);\n    return () => abortController.abort();\n  }\n\n  function deleteReviewHandler({ movie_id: movieId, review_id: reviewId }) {\n    deleteReview(reviewId).then(() => loadMovie(movieId));\n  }\n\n  function updateScoreHandler(\n    { movie_id: movieId, review_id: reviewId },\n    score\n  ) {\n    console.log(\"score\", reviewId, score);\n    updateReview(reviewId, { score }).then(() => loadMovie(movieId));\n  }\n\n  return (\n    <div className=\"container\">\n      <ErrorAlert error={error} />\n      <section className=\"row mt-4\">\n        <article className=\"col-sm-12 col-md-6 col-lg-3\">\n          <img\n            alt={`${movie.title} Poster`}\n            className=\"rounded\"\n            src={movie.image_url}\n            style={{ width: \"100%\" }}\n          />\n        </article>\n        <aside className=\"col-sm-12 col-md-6 col-lg-9\">\n          <Details movie={movie} />\n          <TheaterList theaters={movie.theaters} />\n          <ReviewList\n            reviews={movie.reviews}\n            deleteReview={deleteReviewHandler}\n            setReviewScore={updateScoreHandler}\n          />\n        </aside>\n      </section>\n    </div>\n  );\n}\n\nexport default FullMovie;\n"]},"metadata":{},"sourceType":"module"}